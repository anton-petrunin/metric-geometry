\chapter{Convergence}

\section{Hausdorff convergence}

Let $\spc{X}$ be a metric space.
Given a subset $A\subset \spc{X}$,
consider the distance function to $A$
$$\distfun_A: \spc{X} \to [0,\infty)$$
defined as 
$$\distfun_A(x)
\df
\inf_{a\in A}\{\,\dist ax{\spc{X}}\,\}.$$

\begin{thm}{Definition}\label{def:hausdorff-convergence}
Let $A$ and $B$ be two compact subsets of a metric space $\spc{X}$.
Then the \emph{Hausdorff distance} between $A$ and $B$ is defined as 
$$|A-B|_{\mathcal{H}(\spc{X})}
\df
\sup_{x\in \spc{X}}\{\,|\distfun_A(x)-\distfun_B(x)|\,\}.
$$

\end{thm}
 
Suppose $A$ and $B$ be two compact subsets of a metric space $\spc{X}$.
It is straightforward to check that $|A-B|_{\mathcal{H}(\spc{X})}\le R$ if and only if 
$\distfun_A(b)\le R$ for any $b\in B$
and 
$\distfun_B(a)\le R$ for any $a\in A$.
In other words, $|A-B|_{\mathcal{H}(\spc{X})}< R$ if and only if 
$B$ lies in a $R$-neighborhood of $A$, 
and 
$A$ lies in a $R$-neighborhood of $B$.

Note that the set of all nonempty compact subsets of a metric space $\spc{X}$ equipped with the Hausdorff metric forms a metric space.
This new metric space will be denoted as $\mathcal{H}(\spc{X})$.


\begin{thm}{Exercise}\label{ex:diam}
Let $\spc{X}$ be a metric space.
Given a subset $A\subset \spc{X}$ define its diameter as 
$$\diam A\df\sup_{a,b\in A} |a-b|.$$

Show that 
$$\diam\:\mathcal{H}(\spc{X})\to \RR$$ 
is a $2$-Lipschitz function;
that is, $|\diam A-\diam B|\le 2\cdot\dist{A}{B}{\mathcal{H}(\spc{X})}$.
\end{thm}


\begin{thm}{Blaschke selection theorem}\label{thm:compact+Hausdorff}
Let $\spc{X}$ be a metric space.
Then the space $\mathcal{H}(\spc{X})$ is compact if and only if $\spc{X}$ is compact.
\end{thm}

\parit{Proof; ``only if'' part.}
Note that the map $\iota\:\spc{X}\to \mathcal{H}(\spc{X})$, defined as $\iota\:x\mapsto\{x\}$
(that is, point $x$ mapped to the one-point subset $\{x\}$ of $\spc{X}$)
is distance preserving.
Therefore $\spc{X}$ is isometric to the set $\iota(\spc{X})$ in $\mathcal{H}(\spc{X})$.

Note that for a nonempty subset $A\subset \spc{X}$, we have $\diam A=0$ if and only if $A$ is a one-point set.
Therefore, from Exercise~\ref{ex:diam}, it follows 
that $\iota(\spc{X})$ is closed in $\mathcal{H}(\spc{X})$.

Hence $\iota(\spc{X})$  is compact, as it is a closed subset of a compact space. 
Since $\spc{X}$ is isometric to $\iota(\spc{X})$,
``only if'' part follows.
\qeds

To prove ``if'' part we will need the following two lemmas.%???CHANGE THE PROOF???

\begin{thm}{Lemma}\label{lem:decreasing-converges}
Let $K_1\supset K_2\supset\dots$ be a sequence of nonempty compact sets in a metric space $\spc{X}$
then $K_\infty=\bigcap_n K_n$ is the Hausdorff limit of $K_n$;
that is, $|K_\infty-K_n|_{\mathcal{H}(\spc{X})}\to0$ as $n\to\infty$.
\end{thm}

\parit{Proof.}
Note that $K_\infty$ is compact;
by finite intersection property, $K_\infty$ is nonempty.

If the assertion were false, 
then there is $\eps>0$ such that for each $n$ 
one can choose $x_n\in K_n$
such that $\distfun_{K_\infty}(x_n)\ge\eps$.
Note that $x_n\in K_1$ for each $n$.
Since $K_1$ is compact, 
there is 
a \emph{partial limit}\index{partial limit}\footnote{Partial limit is a limit of a subsequence.}
 $x_\infty$ of $x_n$.
Clearly $\distfun_{K_\infty}(x_\infty)\ge \eps$.

On the other hand, since $K_n$ is closed and $x_m\in K_n$ for $m\ge n$,
we get $x_\infty\in K_n$ for each $n$.
It follows that $x_\infty\in K_\infty$ and therefore $\distfun_{K_\infty}(x_\infty)=0$,
a contradiction.\qeds


\begin{thm}{Lemma}\label{lem:complete+Hausdorff}
If $\spc{X}$ is a compact metric space then $\mathcal{H}(\spc{X})$
is complete.
\end{thm}

\parit{Proof.}
Let $(Q_n)$ be a Cauchy sequence in $\mathcal{H}(\spc{X})$.
Passing to a subsequence of $Q_n$ we may assume that 
$$|Q_n-Q_{n+1}|_{\mathcal{H}(\spc{X})}\le \tfrac1{10^n}\eqlbl{eq:eps=1/10}$$
for each $n$.

Set 
\begin{align*}
K_n&= \set{x\in \spc{X}}{\distfun_{Q_n}(x)\le \tfrac1{10^n}}
\end{align*}
Since $\spc{X}$ is compact so is each $K_n$.

Clearly, $|Q_n-K_n|_{\mathcal{H}(\spc{X})}\le \tfrac1{10^n}$ and from \ref{eq:eps=1/10}, we get
$K_n\supset K_{n+1}$ 
for each $n$.
Set 
$$K_\infty=\bigcap_{n=1}^\infty K_n.$$
Applying Lemma \ref{lem:decreasing-converges},
we get that $|K_n-K_\infty|_{\mathcal{H}(\spc{X})}\to 0$ as $n\to\infty$.
Since $|Q_n-K_n|_{\mathcal{H}(\spc{X})}\le \tfrac1{10^n}$, we get $|Q_n-K_\infty|_{\mathcal{H}(\spc{X})}\to 0$ as $n\to\infty$ --- hence the lemma.
\qeds

\begin{thm}{Exercise}
Let $\spc{X}$ be a complete metric space and $K_n$ be a sequence of compact sets 
which converges in the sence of Hausdorff.
Show that closure of the union $\bigcup_{n=1}^\infty K_n$ is compact.

Use this to show that in Lemma~\ref{lem:complete+Hausdorff} compactness of $\spc{X}$ can be exchanged to completeness.
\end{thm}

\parit{Proof of ``if'' part in \ref{thm:compact+Hausdorff}.}
According to Lemma~\ref{lem:complete+Hausdorff},
$\mathcal{H}(\spc{X})$ is complete.
It remains to show that $\mathcal{H}(\spc{X})$ is totally bounded (\ref{totally-bounded});
that is, given $\eps>0$ there is a finite $\eps$-net in $\mathcal{H}(\spc{X})$.

Choose a finite $\eps$-net $A$ in $\spc{X}$.
Denote by $\mathcal{A}$ the set of all subsets of $A$.
Note that  $\mathcal{A}$ is finite set in $\mathcal{H}(\spc{X})$.
For each compact set $K\subset \spc{X}$, consider the subset $K'$ of all points $a\in A$
such that $\distfun_K(a)\le \eps$.
Then $K' \in \mathcal{A}$ and $|K-K'|_{\mathcal{H}(\spc{X})}\le\eps$.
In other words $\mathcal{A}$ is a finite $\eps$-net in $\mathcal{H}(\spc{X})$.
\qeds

Hausdorff metric defines convergence of compact sets which is more important than metric itself.

\begin{thm}{Exercise}\label{ex:Hausdorff-bry}
Let $X$ and $Y$ be two compact subsets in $\RR^2$.
Assume $|X-Y|_{\mathcal{H}(\RR^2)}<\eps$, 
is it true that
$|\partial X-\partial Y|_{\mathcal{H}(\RR^2)}<\eps$,
where $\partial X$ denotes the boundary of $X$.

Does the converse holds? That is, assume $X$ and $Y$ be two compact subsets in $\RR^2$
and $|\partial X-\partial Y|_{\mathcal{H}(\RR^2)}<\eps$; 
is it true that $|X-Y|_{\mathcal{H}(\RR^2)}\z<\eps$?
\end{thm}

\section{A variation}

It seems that \emph{Hausdorff convergence} was first introduced by Felix Hausdorff~\cite{hausdorff},
and a couple of years later an equivalent definition was given by Wilhelm Blaschke~\cite{blaschke}.

The following refinement of the definition was introduced by  Zden\v{e}k Frol\'{\i}k in \cite{frolik},
and later rediscovered by Robert Wijsman in~\cite{wijsman}.  
This refinement takes an intermediate place between the original Hausdorff convergence and {}\emph{closed convergence}, also introduced by Hausdorff in \cite{hausdorff};
so we still call it Hausdorff convergence.

\begin{thm}{Definition}\label{def:gen-Haus-conv}
Let $(A_n)$ be a sequence of closed sets in a metric space $\spc{X}$.
We say that $(A_n)$ converges to a closed set $A_\infty$ in the sense of Hausdorff if $\distfun_{A_n}(x)\to \distfun_{A_\infty}(x)$ for any $x\in\spc{X}$.
\end{thm}

For example, suppose $\spc{X}$ is the Euclidean plane and $A_n$ is the circle with radius $n$ and center at $(n,0)$.
If we use the standard definition (\ref{def:hausdorff-convergence}), then the sequence $(A_n)$ diverges, but it converges to the $y$-axis in the sense of Definition~\ref{def:gen-Haus-conv}.

The following exercise is analogous to the Blaschke selection theorem (\ref{thm:compact+Hausdorff}).

\begin{thm}{Exercise}
Let $\spc{X}$ be a proper metric space
and $(A_n)_{n=1}^\infty$ be a sequence of closed sets in~$\spc{X}$.
Assume that for some (and therefore any) point  $x\in\spc{X}$, 
the sequence $a_n=\distfun_{A_n}(x)$ is bounded.
Show that the sequence  $(A_n)_{n=1}^\infty$ has a convergent subsequence in the sense of Definition~\ref{def:gen-Haus-conv}.
\end{thm}


\section{Gromov--Hausdorff metric}

The goal of this section is to cook up a metric space out of metric spaces.
More precisely, we want to define the so called  Gromov--Hausdorff metric on the set of \emph{isometry classes} of compact metric spaces.
(Being isometric is an equivalence relation, 
and an isometry class is an equivalence class with respect to this equivalence relation.)

The obtained metric space will be denoted as $\spc{M}$.
Given two metric spaces $\spc{X}$ and $\spc{Y}$,
denote by $[\spc{X}]$ and $[\spc{Y}]$ their isometry classes;
that is, $\spc{X}'\in [\spc{X}]$ if and only if $\spc{X}'\iso \spc{X}$.
Pedantically, the Gromov--Hausdorff distance from $[\spc{X}]$ 
to $[\spc{Y}]$ should be denoted as $|[\spc{X}]-[\spc{Y}]|_{\spc{M}}$;
but we will often write it as $|\spc{X}-\spc{Y}|_{\spc{M}}$ and say (not quite correctly) 
``$|\spc{X}-\spc{Y}|_{\spc{M}}$ is the Gromov--Hausdorff distance from  $\spc{X}$ 
to  $\spc{Y}$''.
In other words, from now on the term \emph{metric space} might stands for \emph{isometry class of this metric space}.

The metric on $\spc{M}$ is maximal metric such that \emph{the distance between subspaces in a metric space is not greater than the Hausdorff distance between them}.
Here is a formal definition:

\begin{thm}{Definition}\label{def:GH}
Let $\spc{X}$ and $\spc{Y}$ be compact metric spaces. 
The Gromov--Hausdorff distance $|\spc{X}-\spc{Y}|_{\spc{M}}$
between them is defined by the following
relation.
 
Given  $r > 0$, we have that $|\spc{X}-\spc{Y}|_{\spc{M}} < r$ if and only if there exist a metric
space $\spc{Z}$ and subspaces $\spc{X}'$ and $\spc{Y}'$ in $\spc{Z}$ that are isometric to $\spc{X}$ and $\spc{Y}$
respectively and such that $|\spc{X}'-\spc{Y}'|_{\mathcal{H}(\spc{Z})} < r$. 
(Here $|\spc{X}'-\spc{Y}'|_{\mathcal{H}(\spc{Z})}$ denotes the Hausdorff distance between sets $\spc{X}'$ and $\spc{Y}'$ in $\spc{Z}$.)
\end{thm}

Bit later (see \ref{thm:GH-is-a-metric}) we will show that \emph{Hausdorff metric} is indeed a metric.

We say that a sequence
of (isometry classes of) compact metric spaces $\spc{X}_n$ 
\emph{converges in the sense of Gromov--Hausdorff}\index{converges in the sense of Gromov--Hausdorff} to the (isometry classes of)
compact metric space $\spc{X}_\infty$ if $|\spc{X}_n - \spc{X}_\infty|_{\spc{M}} \to 0$ as $n\z\to\infty$;
in this case we write $\spc{X}_n\GHto \spc{X}_\infty$.

Let us discuss few reformulations of the definition.

\parbf{Metrics on disjoined union.}
Definition~\ref{def:GH} deals with a huge class of metric spaces,
namely, all metric spaces $\spc{Z}$ that contain subspaces isometric to $\spc{X}$ and $\spc{Y}$.
It is possible to reduce this class to metrics on the disjoint unions of $\spc{X}$ and $\spc{Y}$. 
More precisely, 

\begin{thm}{Proposition}\label{prop:GH=X+Y}
The Gromov--Hausdorff distance between two compact metric spaces $\spc{X}$
and $\spc{Y}$ is the infimum of $r > 0$ such that there exists a metric
$|{*}-{*}|_{\spc{W}}$ on the disjoint union $\spc{W}=\spc{X}\sqcup \spc{Y}$ 
such that the restrictions of $|{*}-{*}|_{\spc{W}}$ to $\spc{X}$ and $\spc{Y}$
coincide with $|{*}-{*}|_\spc{X}$ and $|{*}-{*}|_{\spc{Y}}$ 
and $|\spc{X}-\spc{Y}|_{\mathcal{H}(\spc{W})} < r$. 
\end{thm}


\parit{Proof.}
Identify $\spc{X}\sqcup \spc{Y}$ with $\spc{X}'\cup \spc{Y}' \subset \spc{Z}$ 
(the notation
is from Definition~\ref{def:GH}). 

More formally, fix isometries $f\: \spc{X} \to \spc{X}'$ and
$g\: \spc{Y} \to \spc{Y}'$, then define the distance between $x \in \spc{X}$ and $y \in \spc{Y}$ by
$|x-y|_{\spc{W}} = |f (x)- g(y)|_{\spc{Z}}+\eps$ for small enuf $\eps>0$.%
\footnote{We add $\eps$ to ensure that $d(x, y) > 0$ for any $x\in \spc{X}$ and $y\in \spc{Y}$;
so $|x-y|_{\spc{W}}$ is indeed a metric.}
This yields a metric on $\spc{W}=\spc{X}\sqcup \spc{Y}$ for which
$|\spc{X}- \spc{Y}|_{\mathcal{H}(\spc{W})} \z< r$.
\qeds

\parbf{Fixed ambient space.}
The following proposition says that the space $\spc{Z}$ in Definition~\ref{def:GH} can be exchanged to a fixed space, namely $\ell^\infty$ --- the space of bounded infinite sequences with the metric defined by $\sup$-norm.

\begin{thm}{Proposition}\label{prop:GH-with-fixed-Z}
Let $\spc{X}$ and $\spc{Y}$ be comact metric spaces.
Then
$$|\spc{X}-\spc{Y}|_{\spc{M}} = \inf \{|\spc{X}'-\spc{Y}'|_{\mathcal{H}(\ell^\infty)}\}$$ 
where the infimum is taken over all pairs of sets $\spc{X}'$ and $\spc{Y}'$ in $\ell^\infty$
which isometric to  $\spc{X}$ and $\spc{Y}$ correspondingly.  
\end{thm}




\parit{Proof of \ref{prop:GH-with-fixed-Z}.}
By the definition, we have that 
\[|\spc{X}-\spc{Y}|_{\spc{M}} \leq \inf \{|\spc{X}'-\spc{Y}'|_{\mathcal{H}(\ell^\infty)}\}.\]

Let $\spc{W}$ be an arbitrary metric space with the underlying set $\spc{X}\sqcup \spc{Y}$.
Note $\spc{W}$ is compact since it is union of two compact subsets $\spc{X},\spc{Y}\subset \spc{W}$.
In particular, $\spc{W}$ is separable.

By Lemma \ref{lem:frechet}, there is an distance preserving embedding $\iota\:\spc{W}\z\to \ell^\infty$.
It remains to apply Proposition~\ref{prop:GH=X+Y}.
\qeds



\section{Almost isometries}\label{sec:alm-isom}

\begin{thm}{Definition} Let $\spc{X}$ and $\spc{Y}$ be metric spaces and $\eps > 0$. 
A  map\footnote{possibly noncontinuous} $f\: \spc{X} \z\to \spc{Y}$ is called an $\eps$-isometry 
if 
$$|f(x)-f(x')|_{\spc{Y}}\lege |x-x'|_{\spc{X}}\pm\eps$$
for any $x,x'\in \spc{X}$ 
and if $f(\spc{X})$ is an $\eps$-net in $\spc{Y}$.
\end{thm}

\begin{thm}{Exercise}\label{ex:alm-isom:compositon}
Let $f\:\spc{X}\to \spc{Y}$ and $g\:\spc{Y}\to \spc{Z}$ be two $\eps$-isometries.
Show that $g\circ f\: \spc{X}\to \spc{Z}$ is a $(3\cdot\eps)$-isometry.
\end{thm}


\begin{thm}{Exercise}\label{ex:alm-isom:inverse}
 Assume $f\: \spc{X} \z\to \spc{Y}$ is an $\eps$-isometry.
Show that there is a $(3\cdot\eps)$-isometry 
$g\: \spc{Y}\to \spc{X}$.
\end{thm}

\begin{thm}{Exercise}\label{ex:GH=>eps-isom}
Assume $|\spc{X}-\spc{Y}|_{\spc{M}}<\eps$, show that there is a $(2\cdot\eps)$-isometry 
$f\: \spc{X}\to \spc{Y}$.
\end{thm}

\begin{thm}{Proposition}\label{prop:alm-isom=>GH}
Let $\spc{X}$ and $\spc{Y}$ be metric spaces 
and let $f\: \spc{X}\to \spc{Y}$ be an $\eps$-isometry.
Then 
\[|\spc{X}-\spc{Y}|_{\spc{M}}\le 2\cdot \eps.\]
\end{thm}

\parit{Proof.} Consider the set $\spc{W}=\spc{X}\sqcup \spc{Y}$.
Note that the following defines a metric on $\spc{W}$:
\begin{itemize}
\item  For any $x,x'\in \spc{X}$
$$|x-x'|_{\spc{W}}=|x-x'|_{\spc{X}};$$
\item For any $y,y'\in \spc{Y}$,
$$|y-y'|_{\spc{W}}=|y-y'|_{\spc{Y}}$$
\item For any $x\in \spc{X}$ and $y\in \spc{Y}$,
$$|x-y|_{\spc{W}}=\eps+\inf_{x'\in \spc{X}}\{|x-x'|_{\spc{X}}+|f(x')-y|_{\spc{Y}}\}.$$
\end{itemize}

Since $f(\spc{X})$ is an $\eps$-net in $\spc{Y}$,
for any $y\in \spc{Y}$ there is $x\in \spc{X}$ such that $|f(x)-y|_{\spc{Y}}\z\le\eps$;
therefore $|x-y|_{\spc{W}}\le 2\cdot\eps$.
On the other hand for any $x\in \spc{X}$, we have $|x-y|_{\spc{W}}\le\eps$
for $y=f(x)\in \spc{Y}$.

It follows that $|\spc{X}-\spc{Y}|_{\mathcal{H}(\spc{W})}\le 2\cdot\eps$.
\qedsf






