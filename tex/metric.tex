\chapter{Definitions}\label{chap:defs}

In this lecture, we remind several definitions related to metric spaces and fix some conventions.

This lecture is self-contained, but it is written for students with some prior knowledge of metric spaces;
an introduction to general topology is sufficient but not necessary.
For a more detailed introduction, we recommend the first couple of chapters in the book by Dmitri Burago, Yuri Burago, and Sergei Ivanov \cite{burago-burago-ivanov}.

\section{Metric spaces}
\label{sec:metric spaces}

The distance between two points $x$ and $y$ in a metric space $\spc{X}$ will be denoted by $\dist{x}{y}{}$ or $\dist{x}{y}{\spc{X}}$.
The latter notation is used if we need to emphasize 
that the distance is taken in the space~${\spc{X}}$.

Let us recall the definition of metric. 

\begin{thm}{Definition}\label{def:metric}
A \index{metric}\emph{metric} on a set $\spc{X}$ is a real-valued function $(x,y)\z\mapsto\dist{x}{y}{\spc{X}}$ that satisfies the following conditions for any $x,y,z\z\in \spc{X}$:

\begin{subthm}{metric>=0}
$\dist{x}{y}{\spc{X}}\ge 0$,
\end{subthm}

\begin{subthm}{metric=0} $\dist{x}{y}{\spc{X}}= 0$ $\iff$ $x=y$,
\end{subthm}

\begin{subthm}{metric:sym} $\dist{x}{y}{\spc{X}}=\dist{y}{x}{\spc{X}}$,
\end{subthm}

\begin{subthm}{metric:triangle} $\dist{x}{y}{\spc{X}}+\dist{y}{z}{\spc{X}}\ge\dist{x}{z}{\spc{X}}$.
\end{subthm}

\end{thm}

Recall that a \index{metric space}\emph{metric space} is a set with a metric on it.
The elements of the set are called \index{point}\emph{points}. 
Most of the time we keep the same notation for the metric space and its underlying set;
the latter can be denoted by $\ushort{\spc{X}}$ if needed.

Given radius $R\in[0,\infty]$ and center $x\in \spc{X}$, the sets
\begin{align*}
\oBall(x,R)&=\set{y\in \spc{X}}{\dist{x}{y}{}<R},
\\
\cBall[x,R]&=\set{y\in \spc{X}}{\dist{x}{y}{}\le R}
\end{align*}
are called, respectively, the  \index{open ball}\emph{open} and  the \index{closed ball}\emph{closed  balls}.
The notations $\oBall(x,R)_{\spc{X}}$ and $\cBall[x,R]_{\spc{X}}$
might be used if we need to emphasize that these balls are taken in the metric space $\spc{X}$.


\begin{thm}{Exercise}\label{ex:quad-inq}
Show that the following inequality
\[\dist{p}{q}{\spc{X}}+\dist{x}{y}{\spc{X}}\le\dist{p}{x}{\spc{X}}+\dist{p}{y}{\spc{X}}+\dist{q}{x}{\spc{X}}+\dist{q}{y}{\spc{X}}\]
holds for any four points $p$, $q$, $x$, and $y$ in a metric space $\spc{X}$.
\end{thm}

\section{Topology}

The standard calculus definitions of \index{closed set}\emph{closed} and \index{open set}\emph{open sets}, \index{continuous function}\emph{continuous functions}, and \index{converging sequence}\emph{converging sequences} admit straightforward generalizations in the context of metric spaces.

\begin{thm}{Exercise}\label{ex:cont-dist}
Let $x$ be a point in a metric space $\spc{X}$.
Show that the \index{distance function}\emph{distance function} $\distfun_x\:\spc{X}\to \RR$ defined by
\[\distfun_x\:y\mapsto \dist{x}{y}{}\]
is continuous.
\end{thm}


\begin{thm}{Exercise}\label{ex:normal}
Let $A$ and $B$ be two disjoint closed sets in a metric space $\spc{X}$.
Construct a continuous function $f\:\spc{X}\to [0,1]$ such that $A=f^{-1}\{0\}$ and $B=f^{-1}\{1\}$.
\end{thm}

\begin{thm}{Advanced exercise}\label{ex:tietze}
Let $f\:A\to\RR$ be a continuous function defined on a closed set $A$ in a metric space $\spc{X}$.
Show that it admits a continuous extension to the whole space;
that is, there is a continuous function $F\:\spc{X}\to\RR$ such that $F(a)=f(a)$ for any $a\in A$.
\end{thm}



\section{Variations}

\parbf{Pseudometris.}
A metric for which the distance between two distinct points can be zero is called a \index{semimetric}\emph{semimetric} (also known as \index{pseudometric}\emph{pseudometric}).
In other words, to define semimetric, we need to remove condition \ref{SHORT.metric=0} from \ref{def:metric}.

Assume $\spc{X}$ is a semimetric space.
Consider an equivalence relation $\sim$ on $\spc{X}$ defined by
\[x\sim y\quad\iff\quad\dist{x}{y}{}=0.\] 
Note that if $x\sim x'$, then $\dist{y}{x}{}=\dist{y}{x'}{}$ for any $y\in\spc{X}$.
Thus, $\dist{*}{*}{}$ defines a metric on the
quotient $\spc{X}/{\sim}$.
The so-obtained metric space, say $\spc{X}'$, is called the 
\emph{corresponding metric space} for the semimetric space $\spc{X}$.
 

This construction shows that nearly any question about semimetric spaces can be reduced to a question about genuine metric spaces.
Often we do not distinguish between a semimetric space $\spc{X}$ and its corresponding metric space $\spc{X}'$.

\parbf{$\bm{\infty}$-metrics.}
One may also consider metrics with values in $[0,\infty]$;
that is, we allow infinite distance between points.
We might call them \index{metric!$\infty$-metric}\emph{$\infty$-metrics}, but most of the time we use the term \textit{metric}.

The following construction shows how to reduce questions about $\infty$-metrics to genuine metrics. 

Let 
\[x\approx y\quad\iff\quad\dist{x}{y}{}<\infty;\]
it defines another equivalence relation on $\spc{X}$.
The equivalence class of a point $x\in\spc{X}$ will be called the \index{metric component}\emph{metric component} 
 of $x$; it will be denoted by $\spc{X}_x$.
Note that 
\[\spc{X}_x=\oBall(x,\infty)_{\spc{X}};\]
that is, the metric component of $x$ is the open ball centered at $x$ and radius $\infty$.

If $\{\spc{X}_\alpha\}$ is a collection of metric spaces, then \index{disjoint union}\emph{disjoint union} $\bm{X}\z=\bigsqcup_\alpha\spc{X}_\alpha$ will be considered with a natural metric defined by
\[\dist{x}{y}{\bm{X}}
\df
\begin{cases}
\dist{x}{y}{\spc{X}_\alpha}&\text{if}\quad x,y\in \spc{X}_\alpha\quad\text{for some}\quad \alpha,
\\
\hfil \infty&\text{otherwise.}
\end{cases}
\]
It follows that any $\infty$-metric space is a disjoint union of genuine metric spaces --- the metric components of the original $\infty$-metric space.

\begin{thm}{Exercise}\label{ex:pseudo-infty-metric}
Given two sets $A$ and $B$ on the plane, set 
\[\dist{A}{B}{}=\mu(A\bigtriangleup B),\]
where $\mu$ denotes the Lebesgue measure and $\bigtriangleup$ denotes symmetric difference
\[A\bigtriangleup B
\df(A\cup B)\setminus(B\cap A)
=(A\setminus B)\cup(B\setminus A).\]

\begin{subthm}{ex:pseudo-infty-metric:pseudo}
Show that $\dist{*}{*}{}$ is a semimetric on the set of bounded closed subsets.
\end{subthm}

\begin{subthm}{ex:pseudo-infty-metric:infty}
Show that $\dist{*}{*}{}$ is an $\infty$-metric on the set of all open subsets.
\end{subthm}
\end{thm}

\section{Maximal metric and gluing}
\label{sec:max+glue}

\parbf{Maximal metric.}
Let $\{\,\dist{\ }{\ }{\alpha}\,\}$ be a family of $\infty$-semimetrics on a fixed set.
Observe that
\[\dist{x}{y}{}\df\sup_\alpha\{\,\dist{x}{y}{\alpha}\,\}\]
defines an $\infty$-semimetric; it is called the \index{maximal metric}\emph{maximal metric} of the family.

\parbf{Gluing.}
Suppose $\sim$ is an equivalence relation on an $\infty$-semimetric space $\spc{X}$.
Given $x\in\spc{X}$, 
denote by $[x]$ its equivalence class in the quotient $\spc{X}/\sim$.
Consider all $\infty$-semimetrics $|\ -\ |_\alpha$ on $\spc{X}/\sim$ such that the maps $\spc{X}\to \spc{X}/\sim$ defined by $x\mapsto [x]$ is \index{short map}\emph{short};
that is,
\[|[x]-[x']|_\alpha\le |x-x'|_{\spc{X}}\]
for any $x,x'\in \spc{X}$.
Let us equip $\spc{X}/\sim$ with the maximal metric of this family; in general, it is an $\infty$-semimetric.
The space $\spc{Z}$ that corresponds to the obtained $\infty$-semimetric space is called \index{gluing}\emph{gluing} of $\spc{X}$ along $\sim$.

This definition can be applied to a disjoint union of spaces; this way we can glue an arbitrary collection of metric spaces.

Note that any partially defined map $\phi$ from $\spc{X}$ to $\spc{Y}$ defines a minimal equivalence relation on $\spc{X}\sqcup\spc{Y}$ such that $x\sim \phi(x)$;
the corresponding gluing space is called \emph{gluing} along $\phi$.

The following exercise shows that metric gluing and the corresponding topological gluing
might have different topologies.
 
\begin{thm}{Exercise}\label{ex:gluing}
Construct a homeomorphism $\phi\:[0,1]\to [0,1]$ such that gluing of two unit intervals $[0,1]$ along $\phi$ is a one-point metric space.
\end{thm}


\section{Completeness}

A metric space $\spc{X}$ is called \index{complete space}\emph{complete} if every Cauchy sequence of points in $\spc{X}$ converges in $\spc{X}$.

\begin{thm}{Exercise}\label{ex:almost-min}
Suppose that $\rho$ is a positive continuous function on a complete metric space $\spc{X}$ and $\eps>0$.
Show that there is a point $x\in \spc{X}$ such that 
\[\rho(x)<(1+\eps)\cdot\rho(y)\]
for any point $y\in \oBall(x,\rho(x))$.
\end{thm}

Most of the time we will assume that a metric space is complete.
The following construction produces a complete metric space $\bar{\spc{X}}$ for any given metric space $\spc{X}$.


\parbf{Completion.}
Given a metric space $\spc{X}$, 
consider the set $\spc{C}$ of all Cauchy sequences in $\spc{X}$.
Note that for any two Cauchy sequences $(x_n)$ and $(y_n)$ the right-hand side in \ref{eq:cauchy-dist} is defined;
moreover, it defines a semimetric on~$\spc{C}$
\[\dist{(x_n)}{(y_n)}{\spc{C}}\df\lim_{n\to\infty}\dist{x_n}{y_n}{\spc{X}}.\eqlbl{eq:cauchy-dist}\]
The corresponding metric space is called the \index{completion}\emph{completion} of $\spc{X}$;
it will be denoted by $\bar{\spc{X}}$.
  
For each point $x\in\spc{X}$, one can consider a constant sequence $x_n=x$ which is Cauchy.
It defines a natural inclusion map $\spc{X}\hookrightarrow \bar{\spc{X}}$.
It is easy to check that this map is distance-preserving.
In particular, we can (and will) consider $\spc{X}$ as a subset of $\bar{\spc{X}}$.

Note that $\spc{X}$ is a dense subset in its completion $\bar{\spc{X}}$.

\begin{thm}{Exercise}\label{ex:complete-completion}
Show that the completion of a metric space is complete.
\end{thm} 

\section{G-delta sets}\label{sec:G-delta}

\begin{thm}{Baire's theorem}\label{thm:baire}
For any sequence $\Omega_1,\Omega_2,\dots$ of open dense subsets in a complete metric space, the intersection $\bigcap_{n\in \NN}\Omega_n$ is dense.
\end{thm}

A subset is called a \index{G-delta set}\emph{G-delta} if it can be presented as an intersection of a countable number of open subsets.
Note that by Baire's theorem, a countable intersection of dense G-delta sets is a dense G-delta set --- in particular it is nonempty.
Therefore we are allowed to say that a dense G-delta set contains \textit{most} of the points in a complete metric space.

\parit{Proof.}
We may assume that the space is nonempty; otherwise, there is nothing to prove.

Given a  closed ball $\cBall[p_0,R_0]$,
let us apply induction to construct a nested sequence of closed balls
\[\cBall[p_0,R_0]\supset\cBall[p_1,R_1]\supset \cBall[p_2,R_2]\supset\dots\]
such that $\cBall[p_n,R_n]\subset \Omega_n$ and $R_n>0$ for each $n\ge 1$. 
Assume $\cBall[p_{n-1},R_{n-1}]$ is already constructed.
Since $\Omega_n$ is dense we can choose a closed ball 
$\cBall[p_n,R_n]\subset\Omega_n\cap \cBall[p_{n-1},R_{n-1}]$.

Note that we can assume that $R_n<\tfrac1{n}$ for each $n\z\ge 1$.
In this case, the sequence $p_1$, $p_2,\dots$ is Cauchy; therefore, it is converging.
Observe that its limit $p_\infty$ belongs to each $\Omega_n$.
It follows that any closed ball $\cBall[p_0,R_0]$ contains a point in $\bigcap_{n\in \NN}\Omega_n$, hence the result.
\qeds
 





\section{Compact spaces}

Let us recall a few statements about compact metric spaces.

\begin{thm}{Definition}\label{def:compact}
A metric space $\spc{K}$ is compact if and only if one of the following equivalent conditions holds:

\begin{subthm}{}
 Every open cover of $\spc{K}$ has a finite subcover.
\end{subthm}

\begin{subthm}{}
 Every sequence of points in $\spc{K}$ has a subsequence that converges in $\spc{K}$.
\end{subthm}

\begin{subthm}{totally-bounded}
The space $\spc{K}$ is complete and \index{totally bounded space}\emph{totally bounded}; that is, for any $\eps>0$, the space $\spc{K}$ admits a finite cover by open $\eps$-balls.
\end{subthm}

\end{thm}

Totally bounded spaces are also called \index{precompact}\emph{precompact}.
Note that a \textit{space is precompact if and only if its completion is compact}.

\begin{thm}{Lebesgue lemma}
Let $\spc{K}$ be a compact metric space.
Then for any open cover of $\spc{K}$, there is $\eps>0$ such that any $\eps$-ball in $\spc{K}$ lies in an element of the cover.

The value $\eps$ is called a \index{Lebesgue number}\emph{Lebesgue number} of the covering.
\end{thm}

A subset $N$ of a metric space $\spc{K}$ is called \index{net}\emph{$\eps$-net} if any point $x\in \spc{K}$ lies at the distance less than $\eps$ from a point in $N$.
More generally, a subset $N$ is called an \index{net}\emph{$\eps$-net} of a subset $S\subset\spc{K}$ if any point $x\in S$ lies at the distance less than $\eps$ from a point in $N$. 

Note that totally bounded spaces can be defined as spaces that admit a finite $\eps$-net for any $\eps>0$.

\begin{thm}{Exercise}\label{ex:compact-net}
Show that a space $\spc{K}$ is totally bounded if and only if it contains a compact $\eps$-net for any $\eps>0$. 
\end{thm}


Let $\pack_\eps\spc{X}$ be the exact upper bound on the number of points $x_1,\z\dots,x_n\in \spc{X}$ such that $\dist{x_i}{x_j}{}\ge\eps$ if $i\ne j$.

If $n=\pack_\eps\spc{X}<\infty$, then
the collection of points $x_1,\dots,x_n$ is called a \index{maximal packing}\emph{maximal $\eps$-packing}.
If $\spc{X}$ is a length space (see Section~\ref{sec:intrinsic}), then $n$ is the maximal number of disjoint open $\tfrac\eps2$-balls in $\spc{X}$.

\begin{thm}{Exercise}\label{ex:pack-net}
Show that any maximal $\eps$-packing is an $\eps$-net.
Conclude that a complete space $\spc{X}$ is compact if and only if $\pack_\eps\spc{X}\z<\infty$ for any $\eps>0$.
\end{thm}


\begin{thm}{Exercise}\label{ex:non-contracting-map}
Let $\spc{K}$  be a compact metric space and
$f\:\spc{K}\z\to \spc{K}$
be a distance-noncontracting map.
Prove that $f$ is an \index{isometry}\emph{isometry};
that is, $f$ is a distance-preserving bijection.
\end{thm}

A metric space $\spc{X}$ is called \index{locally compact space}\emph{locally compact} if any point in $\spc{X}$ admits a compact neighborhood;
equivalently, for any point $x\in\spc{X}$, a closed ball $\cBall[x,r]$ is compact for some $r>0$.

\section{Proper spaces}



A metric space $\spc{X}$ is called \index{proper space}\emph{proper} if all closed bounded sets in $\spc{X}$ are compact.
Note that $\spc{X}$ is proper if for some (and therefore any) point $p\in \spc{X}$ and any $R<\infty$, 
the closed ball $\cBall[p,R]_{\spc{X}}$ is compact.

Recall that a function $f\:\spc{X}\to\RR$ is \index{proper function}\emph{proper} if, for any compact set $K\subset \RR$, its inverse image $f^{-1}(K)$ is compact.
Observe that $\spc{X}$ is proper if and only if the function $\distfun_p\:\spc{X}\to\RR$ is \index{proper function}\emph{proper} for some (and therefore any) point $p\in \spc{X}$.

\begin{thm}{Exercise}\label{ex:loc-compact-not-proper}
Give an example of a metric space that is locally compact but not proper.
\end{thm}

\section{Geodesics}
\label{sec:geods}

Let $\spc{X}$ be a metric space 
and $\II$\index{$\II$} a real interval. 
A distance-preserving map $\gamma\:\II\to \spc{X}$ is called a \index{geodesic}\emph{geodesic}%
\footnote{Others call it differently: \textit{shortest path}, \textit{minimizing geodesic}.
Also, note that the meaning of the term \textit{geodesic} is different from what is used in Riemannian geometry, altho they are closely related.}; 
in other words, $\gamma\:\II\to \spc{X}$ is a geodesic if 
\[\dist{\gamma(s)}{\gamma(t)}{\spc{X}}=|s-t|\]
for any pair $s,t\in \II$.

If $\gamma\:[a,b]\to \spc{X}$ is a geodesic such that $p=\gamma(a)$, $q=\gamma(b)$, then we say that $\gamma$ is a geodesic from $p$ to $q$.
In this case, the image of $\gamma$ is denoted by $[p q]$\index{$[{*}{*}]$}, and, with abuse of notations, we also call it a \index{geodesic}\emph{geodesic}.
We may write $[p q]_{\spc{X}}$ 
to emphasize that the geodesic $[p q]$ is in the space  ${\spc{X}}$.

In general, a geodesic from $p$ to $q$ need not exist and if it exists, it need not  be unique.  
However, once we write $[p q]$ we assume that we have chosen such geodesic.

A \index{geodesic path}\emph{geodesic path} is a geodesic with constant-speed parameterization by the unit interval $[0,1]$.

A metric space is called \index{geodesic space}\emph{geodesic} if any pair of its points can be joined by a geodesic.

An $\infty$-metric space $\spc{X}$ is called {}\emph{geodesic} if each metric component of $\spc{X}$ is geodesic.

\begin{thm}{Exercise}\label{ex:pogorelov}
Let $f$ be a centrally symmetric positive continuous function on $\mathbb{S}^2$.
Given two points $x,y\in \mathbb{S}^2$,
set 
\[\|x-y\|=\int_{B(x,\frac \pi2)\setminus B(y,\frac\pi2)}f.\]

Show that $(\mathbb{S}^2,\|{*}-{*}\|)$ is a geodesic space,
and the geodesics in $(\mathbb{S}^2,\|{*}-{*}\|)$ run along great circles of $\mathbb{S}^2$.
\end{thm}

\section{Metric trees}

A geodesic space $\spc{T}$ is called a \index{metric tree}\emph{metric tree} if any two points in $\spc{T}$ are connected by a unique geodesic,
and the union of any two geodesics $[xy]_{\spc{T}}$, and $[yz]_{\spc{T}}$ contains the geodesic $[xz]_{\spc{T}}$.

{

\begin{wrapfigure}{r}{25 mm}
\vskip-6mm
\centering
\includegraphics{mppics/pic-105}
\end{wrapfigure}

The latter means that any triangle in $\spc{T}$ is a \index{tripod}\emph{tripod};
that is, for any three points $x$, $y$, and $z$ there is a point $p$ such that 
\[[xy]\cup[yz]\cup[zx]=[px]\cup[py]\cup[pz].\]

}

\begin{thm}{Exercise}\label{ex:4-point-trees}
Let $p$, $x$, $y$, and $z$ be points in a metric tree.

\begin{subthm}{ex:4-point-trees:diagonals}
Consider three numbers 
\begin{align*}
a&=|p-x|+|y-z|,
\\
b&=|p-y|+|z-x|,
\\
c&=|p-z|+|x-y|.
\end{align*}
Suppose that $a\le b\le c$.
Show that $b=c$.
\end{subthm}

\begin{subthm}{ex:4-point-trees:gromov-product}
Consider three numbers 
\begin{align*}
\alpha&=\tfrac12\cdot(|p-y|+|p-z|-|y-z|),
\\
\beta &=\tfrac12\cdot(|p-x|+|p-z|-|x-z|),
\\
\gamma&=\tfrac12\cdot(|p-x|+|p-y|-|x-y|).
\end{align*}
Suppose that $\alpha\le \beta\le \gamma$.
Show that $\alpha=\beta$.
\end{subthm}

\end{thm}

The set 
\[S(p,r)_{\spc{X}}=\set{x\in\spc{X}}{\dist{p}{x}{\spc{X}}=r}\]
will be called a \index{sphere}\emph{sphere} with center $p$ and radius $r$ in a metric space~$\spc{X}$.


\begin{thm}{Exercise}\label{ex:spheres-in-trees}
Show that spheres in metric trees are ultrametric spaces.
That is, 
\[\dist{x}{z}{}
\le
\max\{\,\dist{x}{y}{},\dist{y}{z}{}\,\}\]
for any $x,y,z\in S(p,r)_{\spc{T}}$.
\end{thm}

\section{Length}

A \index{curve}\emph{curve} is defined as a continuous map from a real interval $\II$ to a metric space.
If $\II=[0,1]$, then the curve is called a \index{path}\emph{path}.

\begin{thm}{Definition}
Let $\spc{X}$ be a metric space and
$\alpha\: \II\to \spc{X}$ be a curve.
We define the \index{length}\emph{length} of $\alpha$ as 
\[
\length \alpha \df \sup_{t_0\le t_1\le\ldots\le t_n}\sum_i \dist{\alpha(t_i)}{\alpha(t_{i-1})}{}.
\]

A curve $\alpha$ is called \index{rectifiable curve}\emph{rectifiable} if $\length \alpha<\infty$.
\end{thm}



\begin{thm}{Theorem}\label{thm:length-semicont}
Length is a lower semi-continuous with respect to the pointwise convergence of curves. 

More precisely, assume that a sequence
of curves $\gamma_n\:\II\to \spc{X}$ in a metric space $\spc{X}$ converges pointwise 
to a curve $\gamma_\infty\:\II\to \spc{X}$;
that is, for any fixed $t \in \II$ we have $\gamma_n(t)\z\to\gamma_\infty(t)$ as $n\to\infty$. 
Then 
$$\liminf_{n\to\infty} \length\gamma_n \ge \length\gamma_\infty.\eqlbl{eq:semicont-length}$$
\end{thm}

\begin{wrapfigure}{o}{20 mm}
\vskip-0mm
\centering
\includegraphics{mppics/pic-100}
\end{wrapfigure}

Note that the inequality \ref{eq:semicont-length} might be strict.
For example, the diagonal $\gamma_\infty$ of the unit square 
can be  approximated by stairs-like
polygonal curves $\gamma_n$
with sides parallel to the sides of the square ($\gamma_6$ is on the picture).
In this case
\[\length\gamma_\infty=\sqrt{2}\quad
\text{and}\quad \length\gamma_n=2\]
for any $n$.

\parit{Proof.}
Fix a sequence $t_0\le\dots\le t_k$ in $\II$.
Set 
\begin{align*}\Sigma_n
&\df
|\gamma_n(t_0)-\gamma_n(t_1)|+\dots+|\gamma_n(t_{k-1})-\gamma_n(t_k)|.
\\
\Sigma_\infty
&\df
|\gamma_\infty(t_0)-\gamma_\infty(t_1)|+\dots+|\gamma_\infty(t_{k-1})-\gamma_\infty(t_k)|.
\end{align*}

Note that for each $i$ we have 
\[|\gamma_n(t_{i-1})-\gamma_n(t_i)|\to|\gamma_\infty(t_{i-1})-\gamma_\infty(t_i)|\]
and therefore
\[\Sigma_n\to \Sigma_\infty\] 
as $n\to\infty$.
Note that 
\[\Sigma_n\le\length\gamma_n\]
for each $n$.
Hence,
$$\liminf_{n\to\infty} \length\gamma_n \ge \Sigma_\infty.$$

Since the partition was arbitrary, applying the definition of length, we get \ref{eq:semicont-length}.
\qeds

\begin{thm}{Exercise}\label{ex:1-Lip-G-delta}
Show that most of 1-Lipschitz paths in the plane have length 1.

More precisely, consider the space $\spc{P}$ of 1-Lipschitz paths in the plane;
that is, all paths $a\:[0,1]\to\RR^2$ such that $|a(t_0)-a(t_1)|\le |t_0-t_1|$ for any $t_0$ and $t_1$.
Equip $\spc{P}$ with the metric defined by
\[\dist{a}{b}{}\df\sup\set{\dist{a(t)}{b(t)}{}}{t\in[0,1]}.\]
Show that a dense G-delta set of paths in $\spc{P}$ has length 1.

\end{thm}


\section{Length spaces}\label{sec:intrinsic}

Let $\spc{X}$ be a metric space.
If for any $\eps>0$ and any pair of points $x,y\in\spc{X}$, there is a path $\alpha$ connecting $x$ to $y$ such that
\[\length\alpha< \dist{x}{y}{}+\eps,\]
then $\spc{X}$ is called a \index{length space}\emph{length space} and the metric on $\spc{X}$ is called a \index{length metric}\emph{length metric}.\label{page:length metric}

An $\infty$-metric space is a length space if each of its metric components is a length space.
In other words, if $\spc{X}$ is an $\infty$-metric space, then in the above definition we assume in addition that $\dist{x}{y}{\spc{X}}<\infty$.

Note that any geodesic space is a length space.
The following example shows that the converse does not hold.


\begin{thm}{Example}
Set $\II_n=[0,1+\tfrac1n]$ for every natural $n$.
Suppose a space $\spc{X}$ is obtained by gluing intervals $\{\II_n\}$, where the left ends are glued to $p$ and the right ends to~$q$.

Observe that the space $\spc{X}$ carries a natural complete length metric with respect to which $\dist{p}{q}{\spc{X}}=1$, but there is no geodesic connecting $p$ to~$q$.
\end{thm}

\begin{thm}{Exercise}\label{ex:no-geod}
Give an example of a complete length space $\spc{X}$ such that no pair of distinct points in $\spc{X}$ can be joined by a geodesic.
\end{thm}

Directly from the definition, it follows that if $\alpha\:[0,1]\to\spc{X}$ is a path from $x$ to $y$ 
(that is, $\alpha(0)=x$ and $\alpha(1)=y$), then 
\[\length\alpha\ge \dist{x}{y}{}.\]
Set 
\[\yetdist{x}{y}{}=\inf\{\,\length\alpha\,\}\]
where the greatest lower bound is taken for all paths from $x$ to~$y$.
It is straightforward to check that $(x,y)\mapsto \yetdist{x}{y}{}$ is an $\infty$-metric; moreover, $(\spc{X},\yetdist{*}{*}{})$ is a length space.
The metric $\yetdist{*}{*}{}$ is called the \index{induced length metric}\emph{induced length metric}.

\begin{thm}{Exercise}\label{ex:compact+connceted}
Let $\spc{X}$ be a complete length space.
Show that for any compact subset $K\subset\spc{X}$
there is a compact path-connected subset $K'\subset\spc{X}$ that contains $K$.  
\end{thm}

\begin{thm}{Exercise}\label{ex:compact=>complete}
Suppose $(\spc{X},\dist{*}{*}{})$ is a complete metric space.
Show that $(\spc{X},\yetdist{*}{*}{})$ is complete.
\end{thm}

Let $A$ be a subset of a metric space $\spc{X}$.
Given two points $x,y\in A$,
consider the value
\[\dist{x}{y}{A}=\inf_{\alpha}\{\,\length\alpha\,\},\]
where the greatest lower bound is taken for all paths $\alpha$ from $x$ to $y$ in~$A$.
In other words, $\dist{*}{*}{A}$ denotes the induced length metric on the subspace $A$.
(The notation $\dist{*}{*}{A}$ conflicts with the previously defined notation for distance $\dist{x}{y}{\spc{X}}$ in a metric space $\spc{X}$.
However, most of the time we will work with ambient length spaces where the meaning will be unambiguous.)

Let $x$ and $y$ be points in a metric space $\spc{X}$.

\begin{enumerate}[(i)]
\item A point $z\in \spc{X}$ is called a \index{midpoint}\emph{midpoint} between $x$ and $y$
if 
\[\dist{x}{z}{}=\dist{y}{z}{}=\tfrac12\cdot\dist[{{}}]{x}{y}{}.\]
\item Assume $\eps\ge 0$.
A point $z\in \spc{X}$ is called an \index{$\eps$-midpoint}\emph{$\eps$-midpoint} between $x$ and $y$
if 
\[\dist{x}{z}{}\le\tfrac12\cdot\dist[{{}}]{x}{y}{}+\eps
\quad\text{and}\quad
\dist{y}{z}{}\le\tfrac12\cdot\dist[{{}}]{x}{y}{}+\eps.\]
\end{enumerate}


Note that a $0$-midpoint is the same as a midpoint.


\begin{thm}{Menger's lemma}\label{lem:mid>geod}
Assume $\spc{X}$ is a complete metric space.
\begin{subthm}{lem:mid>length}
Suppose that for any two points in $\spc{X}$,  
and any positive $\eps$,
there is an $\eps$-midpoint.
Then $\spc{X}$ is a length space.
\end{subthm}

\begin{subthm}{lem:mid>geod:geod}
Suppose that for any two points in $\spc{X}$, 
there is a midpoint.
Then $\spc{X}$ is a geodesic space.
\end{subthm}
\end{thm}

The second part of this lemma was proved by Karl Menger \cite[Section 6]{menger}.

\parit{Proof; \ref{SHORT.lem:mid>length}.}
Choose $x,y\in \spc{X}$;
set $\eps_n=\frac\eps{4^n}$, $\alpha(0)=x$, and $\alpha(1)=y$.

Let $\alpha(\tfrac12)$ be an $\eps_1$-midpoint between $\alpha(0)$ and $\alpha(1)$.
Further, let $\alpha(\frac14)$ 
and $\alpha(\frac34)$ be $\eps_2$-midpoints between the pairs $(\alpha(0),\alpha(\tfrac12))$ 
and $(\alpha(\tfrac12),\alpha(1))$ respectively.
Continue the above procedure;
on the $n$-th step, we define $\alpha(\tfrac{k}{2^n})$,
for every odd integer $k$ such that $0<\tfrac k{2^n}<1$, 
as an $\eps_{n}$-midpoint of the already defined
$\alpha(\tfrac{k-1}{2^n})$ and $\alpha(\tfrac{k+1}{2^n})$.


This way we define $\alpha(t)$ for all dyadic rationals $t$ in $[0,1]$.
Moreover, $\alpha$ has Lipschitz constant $\dist{x}{y}{}+\eps$.
Since $\spc{X}$ is complete, the map $\alpha$ can be extended $(\dist{x}{y}{}+\eps)$-Lipschitz map $\alpha\:[0,1]\to \spc{X}$.
In particular
\[\begin{aligned}
\length\alpha&\le \dist{x}{y}{}+\eps.
\end{aligned}
\eqlbl{eq:eps-midpoint}
\]
Since $\eps>0$ is arbitrary, we get \ref{SHORT.lem:mid>length}.

\parit{\ref{SHORT.lem:mid>geod:geod}.} 
Apply the same argument 
with midpoints instead of $\eps_n$-midpoints.
In this case, \ref{eq:eps-midpoint} holds for $\eps_n=\eps\z=0$.
\qeds

In a compact space, a sequence of $\tfrac1n$-midpoints $z_n$ contains a convergent subsequence.
Therefore Menger's lemma (\ref{lem:mid>geod}) implies the following.

\begin{thm}{Proposition}\label{prop:length+proper=>geodesic}
Any proper length space is geodesic.
\end{thm}

\begin{thm}{Hopf--Rinow theorem}\label{thm:Hopf-Rinow}
Any complete, locally compact length space is proper.
\end{thm}

Before reading the proof, it is instructive to solve \ref{ex:loc-compact-not-proper}.
In the proof, we will use the following exercise.

\begin{thm}{Exercise}\label{ex:eps-nbhd(ball)}
Let $\spc{X}$ be a length space.
Show that $\oBall(x,R+\eps)_{\spc{X}}$ is the $\eps$-neighborhood of $\oBall(x,R)_{\spc{X}}$.
\end{thm}


\parit{Proof.}
Choose a point $x$ in a locally compact length space $\spc{X}$.
Let 
\[\rho(x)
\df
\sup\set{R}{\cBall[x,R]\ \text{is compact}}.\]
Since $\spc{X}$ is locally compact, 
$$\rho(x)>0
\quad\text{for any}\quad
x\in \spc{X}.\eqlbl{eq:rho>0}$$
It is sufficient to show that $\rho(x)=\infty$ for some (and therefore any) point $x\in \spc{X}$.

\begin{clm}{} If $\rho(x)<\infty$, then $B=\cBall[x,\rho(x)]$ is compact.
\end{clm}

Suppose  $\rho(x)>\eps>0$;
by \ref{ex:eps-nbhd(ball)}, 
the set $\cBall[x,\rho(x)-\eps]$ is a compact $2\cdot\eps$-net in~$B$.
Since $B$ is closed and hence complete, it must be compact; see \ref{totally-bounded} and \ref{ex:compact-net}.
\claimqeds

\begin{clm}{} $|\rho(x)-\rho(y)|\le \dist{x}{y}{\spc{X}}$ for any $x,y\in \spc{X}$;
in particular, $\rho\:\spc{X}\to\RR$ is a continuous function.
\end{clm}

Suppose $\rho(x)+|x-y|<\rho(y)$ for some $x,y\in \spc{X}$. 
Then 
$\cBall[x,\rho(x)+\eps]$ is a closed subset of $\cBall[y,\rho(y)]$ for some $\eps>0$.
Since $\cBall[y,\rho(y)]$ is compact, so is $\cBall[x,\rho(x)+\eps]$ --- a contradiction.\claimqeds

Let $\eps=\min\set{\rho(y)}{y\in B}$; the minimum is defined since $B$ is compact and $\rho$ is continuous.
By \ref{eq:rho>0}, we have $\eps>0$.

Choose a finite $\tfrac\eps{10}$-net $\{a_1,a_2,\dots,a_n\}$ in $B=\cBall[x,\rho(x)]$.
The union $W$ of the closed balls $\cBall[a_i,\eps]$ is compact.
By \ref{ex:eps-nbhd(ball)},
$\cBall[x,\rho(x)+\frac\eps{10}]\subset W$.
Therefore, $\cBall[x,\rho(x)+\frac\eps{10}]$ is compact,
a contradiction.
\qeds

\begin{thm}{Exercise}\label{exercise from BH}
Construct a geodesic space $\spc{X}$ that is locally compact,
but whose completion $\bar{\spc{X}}$ is neither geodesic nor locally compact.
\end{thm}


\begin{thm}{Advanced exercise}\label{ex:gross}
Show that for any compact connected space $\spc{X}$ there is a number $\ell$ such that for any finite collection of points there is a point $z$ that lies on average distance $\ell$ from the collection;
that is, for any $x_1,\dots,x_n\in \spc{X}$ there is $z\in \spc{X}$ such that
\[\tfrac1n\cdot\sum_i|x_i-z|_{\spc{X}}=\ell.\]
\end{thm}






